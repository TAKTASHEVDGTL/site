(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{1935:(e,t,n)=>{"use strict";var r=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,c=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))s.call(e,l)||l===n||o(e,l,{get:()=>t[l],enumerable:!(r=i(t,l))||r.enumerable});return e},d={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(d,{CHANNEL:()=>h.CHANNEL,VisualEditsMessenger:()=>u.default}),e.exports=c(o({},"__esModule",{value:!0}),d);var u=((e,t,n)=>(n=null!=e?r(l(e)):{},c(!t&&e&&e.__esModule?n:o(n,"default",{value:e,enumerable:!0}),e)))(n(6944)),h=n(6944)},3944:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},6168:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},6613:(e,t,n)=>{"use strict";n.d(t,{Analytics:()=>h});var r=n(2115),o=n(7260),i=n(5704);function a(){return"undefined"!=typeof window}function l(){return"production"}function s(){return"development"===((a()?window.vam:l())||"production")}function c(e){return new RegExp("/".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(?=[/?#]|$)"))}function d(e){return(0,r.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,r.useEffect)(()=>{var t;!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!0};if(!a())return;!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";if("auto"===e){window.vam=l();return}window.vam=e}(t.mode),window.va||(window.va=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(window.vaq=window.vaq||[]).push(t)}),t.beforeSend&&(null==(e=window.va)||e.call(window,"beforeSend",t.beforeSend));let n=t.scriptSrc?t.scriptSrc:s()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?"".concat(t.basePath,"/insights/script.js"):"/_vercel/insights/script.js";if(document.head.querySelector('script[src*="'.concat(n,'"]')))return;let r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn="@vercel/analytics"+(t.framework?"/".concat(t.framework):""),r.dataset.sdkv="1.6.1",t.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),t.endpoint?r.dataset.endpoint=t.endpoint:t.basePath&&(r.dataset.endpoint="".concat(t.basePath,"/insights")),t.dsn&&(r.dataset.dsn=t.dsn),r.onerror=()=>{let e=s()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log("[Vercel Web Analytics] Failed to load script from ".concat(n,". ").concat(e))},s()&&!1===t.debug&&(r.dataset.debug="false"),document.head.appendChild(r)}({framework:e.framework||"react",basePath:null!=(t=e.basePath)?t:function(){if(void 0!==i&&void 0!==i.env)return i.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,r.useEffect)(()=>{e.route&&e.path&&function(e){var t;let{route:n,path:r}=e;null==(t=window.va)||t.call(window,"pageview",{route:n,path:r})}({route:e.route,path:e.path})},[e.route,e.path]),null}function u(e){let{route:t,path:n}=(()=>{let e=(0,o.useParams)(),t=(0,o.useSearchParams)(),n=(0,o.usePathname)();return e?{route:function(e,t){if(!e||!t)return e;let n=e;try{let e=Object.entries(t);for(let[t,r]of e)if(!Array.isArray(r)){let e=c(r);e.test(n)&&(n=n.replace(e,"/[".concat(t,"]")))}for(let[t,r]of e)if(Array.isArray(r)){let e=c(r.join("/"));e.test(n)&&(n=n.replace(e,"/[...".concat(t,"]")))}return n}catch(t){return e}}(n,Object.keys(e).length?e:Object.fromEntries(t.entries())),path:n}:{route:null,path:n}})();return r.createElement(d,{path:n,route:t,...e,basePath:function(){if(void 0!==i&&void 0!==i.env)return i.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function h(e){return r.createElement(r.Suspense,{fallback:null},r.createElement(u,{...e}))}},6944:(e,t,n)=>{"use strict";var r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(l,{CHANNEL:()=>d,default:()=>E}),e.exports=((e,t,n,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of i(t))a.call(e,s)||s===n||r(e,s,{get:()=>t[s],enumerable:!(l=o(t,s))||l.enumerable});return e})(r({},"__esModule",{value:!0}),l);var s=n(2115),c=n(5155),d="ORCHIDS_HOVER_v1",u="orchids_visual_edit_mode",h="orchids_focused_element",f="",m=e=>{try{let t=JSON.stringify(e);if(t===f)return;f=t}catch(e){}window.parent.postMessage(e,"*")},p=e=>{var t;let n=e.tagName.toLowerCase();if("true"===e.contentEditable||"input"===n||"textarea"===n)return!0;if(["p","h1","h2","h3","h4","h5","h6","span","div","li","td","th","label","a","button"].includes(n)&&(null==(t=e.textContent)?void 0:t.trim())){let t=Array.from(e.childNodes).some(e=>{var t;return e.nodeType===Node.TEXT_NODE&&(null==(t=e.textContent)?void 0:t.trim())});if(0===e.childElementCount||e.childElementCount<=1&&t)return!0}return!1},g=e=>{let t="";for(let n of e.childNodes)n.nodeType===Node.TEXT_NODE&&(t+=n.textContent||"");return t},w=e=>{let t=e.split(":");if(t.length<3)return null;let n=parseInt(t.pop()||"0"),r=parseInt(t.pop()||"0"),o=t.join(":");return isNaN(r)||isNaN(n)?null:{filePath:o,line:r,column:n}},b=e=>{let t=window.getComputedStyle(e),n=(e,t)=>{if("backgroundColor"===t&&("rgba(0, 0, 0, 0)"===e||"rgb(0, 0, 0, 0)"===e||"transparent"===e||""===e))return"transparent";if("backgroundImage"===t&&("none"===e||""===e)||"textDecoration"===t&&(e.includes("none")||""===e))return"none";if("fontStyle"===t&&("normal"===e||""===e))return"normal";if("fontWeight"===t){let t=parseInt(e);return isNaN(t)?e||"400":String(t)}return"opacity"===t&&("1"===e||""===e)?"1":(t.includes("padding")||t.includes("margin"))&&("0px"===e||"0"===e)||"borderRadius"===t&&("0px"===e||"0"===e)?"0":"letterSpacing"===t&&("normal"===e||"0px"===e)||"gap"===t&&("normal"===e||"0px"===e)?"normal":e};return{fontSize:n(t.fontSize,"fontSize"),color:n(t.color,"color"),fontWeight:n(t.fontWeight,"fontWeight"),fontStyle:n(t.fontStyle,"fontStyle"),textDecoration:n(t.textDecoration,"textDecoration"),textAlign:n(t.textAlign,"textAlign"),lineHeight:n(t.lineHeight,"lineHeight"),letterSpacing:n(t.letterSpacing,"letterSpacing"),paddingLeft:n(t.paddingLeft,"paddingLeft"),paddingRight:n(t.paddingRight,"paddingRight"),paddingTop:n(t.paddingTop,"paddingTop"),paddingBottom:n(t.paddingBottom,"paddingBottom"),marginLeft:n(t.marginLeft,"marginLeft"),marginRight:n(t.marginRight,"marginRight"),marginTop:n(t.marginTop,"marginTop"),marginBottom:n(t.marginBottom,"marginBottom"),backgroundColor:n(t.backgroundColor,"backgroundColor"),backgroundImage:n(t.backgroundImage,"backgroundImage"),borderRadius:n(t.borderRadius,"borderRadius"),fontFamily:n(t.fontFamily,"fontFamily"),opacity:n(t.opacity,"opacity"),display:n(t.display,"display"),flexDirection:n(t.flexDirection,"flexDirection"),alignItems:n(t.alignItems,"alignItems"),justifyContent:n(t.justifyContent,"justifyContent"),gap:n(t.gap,"gap")}},v=e=>{if(!e)return"";try{let t=new URL(e,window.location.origin);if("/_next/image"===t.pathname){let e=t.searchParams.get("url");if(e)return decodeURIComponent(e)}return t.href}catch(t){return e}},y=e=>{if(e.includes("\n")){let t=e.replace(/\n/g,"\\n");return"{`".concat(t,"`}")}return e};function E(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)([]),[o,i]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[f,E]=(0,s.useState)(()=>"undefined"!=typeof window&&"true"===localStorage.getItem(u)),[S,x]=(0,s.useState)(!1),[L,C]=(0,s.useState)(null),[A,R]=(0,s.useState)(null),[_,I]=(0,s.useState)(!1),[z,N]=(0,s.useState)(null),[T,k]=(0,s.useState)(null),P=(0,s.useRef)(!1),M=(0,s.useRef)(null),O=(0,s.useRef)(null),D=(0,s.useRef)(null),j=(0,s.useRef)(!1),B=(0,s.useRef)(null),F=(0,s.useRef)(""),H=(0,s.useRef)(""),q=(0,s.useRef)(null),U=(0,s.useRef)(null),V=(0,s.useRef)(!1),W=(0,s.useRef)(null),Y=(0,s.useRef)({}),X=(0,s.useRef)(new Map),G=(0,s.useRef)(!1),$=(0,s.useRef)(0),K=(0,s.useRef)(null),Z=(0,s.useRef)(new Set),J=(0,s.useRef)(new Map),Q=(0,s.useRef)(new Map);(0,s.useEffect)(()=>{j.current=f,"undefined"!=typeof window&&localStorage.setItem(u,String(f))},[f]),(0,s.useEffect)(()=>{f&&(window.parent.postMessage({type:d,msg:"VISUAL_EDIT_MODE_ACK",active:!0},"*"),window.parent.postMessage({type:d,msg:"VISUAL_EDIT_MODE_RESTORED",active:!0},"*"),setTimeout(()=>{if("undefined"!=typeof window){let e=localStorage.getItem(h);if(e)try{let{id:t}=JSON.parse(e),n=document.querySelector('[data-orchids-id="'.concat(t,'"]'));if(n){let e=n.getBoundingClientRect(),t=new MouseEvent("click",{clientX:e.left+e.width/2,clientY:e.top+e.height/2,bubbles:!0,cancelable:!0});n.dispatchEvent(t)}}catch(e){}}},500))},[]);let ee=e=>({top:e.top-4,left:e.left-4,width:e.width+8,height:e.height+8}),et=()=>{D.current&&i(ee(D.current.getBoundingClientRect()))};(0,s.useEffect)(()=>{if(f&&!W.current){let e=document.createElement("style");e.textContent='\n        [contenteditable="true"]:focus {\n          outline: none !important;\n          box-shadow: none !important;\n          border-color: inherit !important;\n        }\n        [contenteditable="true"] {\n          cursor: text !important;\n        }\n        /* Prevent the default blue highlight on contenteditable */\n        [contenteditable="true"]::selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        [contenteditable="true"]::-moz-selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        /* Prevent child elements from being editable */\n        [contenteditable="true"] [contenteditable="false"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n          opacity: 0.7 !important;\n          cursor: default !important;\n        }\n        /* Ensure protected elements can\'t be selected */\n        [data-orchids-protected="true"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n        }\n        /* Visual edit overlay styles */\n        .orchids-hover-box {\n          position: fixed;\n          pointer-events: none;\n          border: 0.5px dashed #38bdf8;\n          background-color: rgba(191, 219, 254, 0.2);\n          border-radius: 0.125rem;\n        }\n        .orchids-hover-tag {\n          position: fixed;\n          pointer-events: none;\n          font-size: 10px;\n          color: white;\n          background-color: #38bdf8;\n          padding: 0.125rem 0.25rem;\n          border-radius: 0.125rem;\n        }\n        .orchids-focus-tag {\n          position: fixed;\n          font-size: 10px;\n          font-weight: 600;\n          color: white;\n          background-color: #3b82f6;\n          padding: 0 0.25rem;\n          border-radius: 0.125rem;\n          pointer-events: none;\n          user-select: none;\n        }\n        .orchids-focus-box {\n          position: fixed;\n          pointer-events: none;\n          border: 1.5px solid #38bdf8;\n          border-radius: 0.125rem;\n        }\n        .orchids-resize-handle {\n          position: fixed;\n          width: 0.5rem;\n          height: 0.5rem;\n          background-color: #38bdf8;\n          border-radius: 50%;\n          pointer-events: auto;\n        }\n        .orchids-resize-handle-nw {\n          cursor: nw-resize;\n        }\n        .orchids-resize-handle-ne {\n          cursor: ne-resize;\n        }\n        .orchids-resize-handle-sw {\n          cursor: sw-resize;\n        }\n        .orchids-resize-handle-se {\n          cursor: se-resize;\n        }\n        .orchids-resize-handle-n {\n          cursor: n-resize;\n        }\n        .orchids-resize-handle-s {\n          cursor: s-resize;\n        }\n        .orchids-resize-handle-w {\n          cursor: w-resize;\n        }\n        .orchids-resize-handle-e {\n          cursor: e-resize;\n        }\n      ',document.head.appendChild(e),W.current=e}else!f&&W.current&&(W.current.remove(),W.current=null);return()=>{W.current&&(W.current.remove(),W.current=null)}},[f]);let en=e=>{let t,n;if(e!==U.current)return void console.warn("Attempting to handle text change for non-editing element");let r=e.getAttribute("data-orchids-id");if(r&&(t=e.childElementCount>0?g(e):e.innerText||e.textContent||"")!==(n=F.current)){let e=w(r);if(!e)return;m({type:d,msg:"TEXT_CHANGED",id:r,oldText:y(n),newText:y(t),filePath:e.filePath,line:e.line,column:e.column}),F.current=t}},er=e=>{if(!G.current)return;let t=e.getAttribute("data-orchids-id");if(!t)return;let n=w(t);if(!n)return;let r=X.current.get(t);r&&0!==Object.keys(r).length&&(m({type:d,msg:"STYLE_BLUR",id:t,styles:r,className:e.getAttribute("class")||"",filePath:n.filePath,line:n.line,column:n.column}),G.current=!1)},eo=()=>{let e=q.current;if(!e)return;let t=e.getAttribute("data-orchids-id");if(!t)return;let n=w(t);if(!n)return;let r=v(e.src),o=v(H.current);r&&r!==o&&(m({type:d,msg:"IMAGE_BLUR",id:t,oldSrc:o,newSrc:r,filePath:n.filePath,line:n.line,column:n.column}),H.current=r,q.current=null)};(0,s.useEffect)(()=>{function e(e){var t,n,r;if((null==(t=e.data)?void 0:t.type)==="ORCHIDS_STYLE_UPDATE"){let{elementId:t,styles:n}=e.data,r=document.querySelectorAll('[data-orchids-id="'.concat(t,'"]'));if(r.length>0){let e=n.fontFamily||n.fontFamily;if(e){let t=e.replace(/['\s]+/g,"+");if(!Z.current.has(t)){let e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=".concat(t,":wght@400&display=swap"),document.head.appendChild(e),Z.current.add(t)}}if(e){J.current.set(t,e);let n=Q.current.get(t);n&&clearTimeout(n);let r=window.setTimeout(()=>{J.current.delete(t),Q.current.delete(t)},2e3);Q.current.set(t,r)}r.forEach(e=>{D.current===e?((e,t)=>{let n=e.getAttribute("data-orchids-id");if(!n||!w(n))return;document.querySelectorAll('[data-orchids-id="'.concat(n,'"]')).forEach(e=>{Object.entries(t).forEach(t=>{let[n,r]=t,o=n.replace(/([A-Z])/g,"-$1").toLowerCase(),i=r;"backgroundColor"===n&&("transparent"===r||"rgba(0, 0, 0, 0)"===r||"rgb(0, 0, 0, 0)"===r)&&(i="transparent"),"backgroundColor"===n&&"transparent"===i||"backgroundImage"===n&&"none"===r||"textDecoration"===n&&"none"===r||"fontStyle"===n&&"normal"===r||"opacity"===n&&"1"===r||(n.includes("padding")||n.includes("margin"))&&"0"===r||"borderRadius"===n&&"0"===r||"letterSpacing"===n&&"normal"===r||"gap"===n&&"normal"===r?e.style.removeProperty(o):e.style.setProperty(o,i,"important")})});let r=X.current.get(n)||{};X.current.set(n,{...r,...t}),G.current=!0,requestAnimationFrame(()=>{et()})})(e,n):Object.entries(n).forEach(t=>{let[n,r]=t,o=n.replace(/([A-Z])/g,"-$1").toLowerCase(),i=String(r);"backgroundColor"===n&&("transparent"===r||"rgba(0, 0, 0, 0)"===r||"rgb(0, 0, 0, 0)"===r)&&(i="transparent"),"backgroundColor"===n&&"transparent"===i||"backgroundImage"===n&&"none"===r||"textDecoration"===n&&"none"===r||"fontStyle"===n&&"normal"===r||"opacity"===n&&"1"===r||(n.includes("padding")||n.includes("margin"))&&"0"===r||"borderRadius"===n&&"0"===r||"letterSpacing"===n&&"normal"===r||"gap"===n&&"normal"===r?e.style.removeProperty(o):e.style.setProperty(o,i,"important")})})}}else if((null==(n=e.data)?void 0:n.type)==="ORCHIDS_IMAGE_UPDATE"){let{elementId:t,src:n,oldSrc:r}=e.data,o=null;if(document.querySelectorAll('[data-orchids-id="'.concat(t,'"]')).forEach(e=>{if("img"===e.tagName.toLowerCase()){let t=v(e.src);o||(o=e),r&&v(r)===t&&(o=e)}}),!o)return;if("img"===o.tagName.toLowerCase()){let e=o;e.removeAttribute("srcset"),e.srcset="",e.src=n,H.current=v(n),q.current=e,e.onload=()=>et()}}else if((null==(r=e.data)?void 0:r.type)==="RESIZE_ELEMENT"){let{elementId:t,width:n,height:r}=e.data,o=document.querySelector('[data-orchids-id="'.concat(t,'"]'));o&&D.current===o&&(o.style.setProperty("width","".concat(n,"px"),"important"),o.style.setProperty("height","".concat(r,"px"),"important"),et())}}return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);let ei=(e,n)=>{if(!D.current)return;e.preventDefault(),e.stopPropagation();let r=D.current.getBoundingClientRect();t(null),M.current=null,document.body.style.pointerEvents="none",document.querySelectorAll(".resize-handle").forEach(e=>{e.style.pointerEvents="auto"}),x(!0),P.current=!0,C(n),R({x:e.clientX,y:e.clientY,width:r.width,height:r.height})};(0,s.useEffect)(()=>{if(!S||!A||!L||!D.current)return;let n=n=>{var r;let o=n.clientX-A.x,i=n.clientY-A.y,l=A.width,s=A.height;L.includes("e")&&(l=A.width+o),L.includes("w")&&(l=A.width-o),L.includes("s")&&(s=A.height+i),L.includes("n")&&(s=A.height-i);let c=null==(r=D.current)?void 0:r.parentElement;if(c){let e=c.getBoundingClientRect(),t=window.getComputedStyle(c),n=parseFloat(t.paddingLeft)||0,r=parseFloat(t.paddingRight)||0,o=parseFloat(t.paddingTop)||0,i=parseFloat(t.paddingBottom)||0,a=e.width-n-r,d=e.height-o-i,u=s>d;l=Math.max(20,l>a?l:Math.min(l,a)),s=Math.max(20,u?s:Math.min(s,d))}else l=Math.max(20,l),s=Math.max(20,s);e&&t(null),a&&window.parent.postMessage({type:d,msg:"RESIZE_ELEMENT",elementId:a,width:Math.round(l),height:Math.round(s)},"*")},r=()=>{if(D.current&&a){let e=D.current,t=window.getComputedStyle(e),n=parseFloat(t.width)||e.offsetWidth,r=parseFloat(t.height)||e.offsetHeight,o=t.maxWidth,i=t.maxHeight,l=e.parentElement,s="".concat(Math.round(n),"px"),c="".concat(Math.round(r),"px");if(l){let e=l.getBoundingClientRect(),t=window.getComputedStyle(l),o=parseFloat(t.paddingLeft)||0,i=parseFloat(t.paddingRight)||0,a=parseFloat(t.paddingTop)||0,d=parseFloat(t.paddingBottom)||0,u=e.width-o-i,h=e.height-a-d,f=n/u*100,m=r/h*100;(.1>Math.abs(f-Math.round(f))||[25,33.333,50,66.667,75,100].some(e=>.5>Math.abs(f-e)))&&(s="".concat(Math.round(10*f)/10,"%")),.1>Math.abs(m-Math.round(m))&&[25,50,75,100].includes(Math.round(m))&&(c="".concat(Math.round(m),"%"))}let u={};u.width=s,u.height=c,o&&"none"!==o&&"initial"!==o&&(u.maxWidth=s),i&&"none"!==i&&"initial"!==i&&(u.maxHeight=c);let h={type:d,msg:"STYLE_BLUR",id:a,styles:u,filePath:"",line:0,column:0,className:e.getAttribute("class")||""},f=e.getAttribute("data-orchids-id");if(f){let e=w(f);e&&(h.filePath=e.filePath,h.line=e.line,h.column=e.column)}window.parent.postMessage(h,"*")}x(!1),P.current=!1,C(null),R(null),document.body.style.pointerEvents="",M.current=null};return document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)}},[S,A,L,a,e]);let ea=()=>{if(U.current){let e=U.current;U.current=null,er(e),en(e),e.childElementCount>0&&e.querySelectorAll('[data-orchids-protected="true"]').forEach(e=>{e.removeAttribute("contenteditable"),e.removeAttribute("data-orchids-protected"),e.style.userSelect="",e.style.webkitUserSelect=""}),V.current||(e.contentEditable="false");let t=(e.getAttribute("style")||"").replace(/outline:\s*none\s*!important;?/gi,"").replace(/box-shadow:\s*none\s*!important;?/gi,"").trim().replace(/;\s*;/g,";").replace(/^;|;$/g,"");t?e.setAttribute("style",t):e.removeAttribute("style"),e.blur();let n=e._editHandlers;n&&(e.removeEventListener("focus",n.focus),e.removeEventListener("blur",n.blur),e.removeEventListener("input",n.input),delete e._editHandlers),V.current=!1,F.current=""}};return(0,s.useEffect)(()=>{if(!f)return;let e=e=>{let t=e.target.closest("a");t&&!t.isContentEditable&&(e.preventDefault(),e.stopPropagation())},t=e=>{e.preventDefault(),e.stopPropagation()};return document.addEventListener("click",e,!0),document.addEventListener("submit",t,!0),()=>{document.removeEventListener("click",e,!0),document.removeEventListener("submit",t,!0)}},[f]),(0,s.useEffect)(()=>{f||(ea(),X.current.clear(),G.current=!1,q.current=null)},[f]),(0,s.useEffect)(()=>{if(D.current){let e=()=>{if(et(),D.current&&a){let e=ee(D.current.getBoundingClientRect());e&&m({type:d,msg:"FOCUS_MOVED",id:a,rect:{top:e.top,left:e.left,width:e.width,height:e.height}})}};window.addEventListener("scroll",e,!0),window.addEventListener("resize",e);let t=new ResizeObserver(e);return t.observe(D.current),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e),t.disconnect()}}},[a]),(0,s.useEffect)(()=>{function e(e){var n,o;if(P.current||!j.current||_)return;let i=null!=(o=null==(n=document.elementFromPoint(e.clientX,e.clientY))?void 0:n.closest("[data-orchids-id]"))?o:null;if(i!==M.current){if(M.current=i,!i){t(null),r([]),N(null),O.current=null,eo(),m({type:d,msg:"HIT",id:null,tag:null,rect:null});return}let e=i.getAttribute("data-orchids-id");if(e===O.current)return;O.current=e;let n=i.getAttribute("data-orchids-name")||i.tagName.toLowerCase(),o=document.querySelectorAll('[data-orchids-id="'.concat(e,'"]')),l=[];o.forEach(e=>{if(e.getAttribute("data-orchids-id")===a)return;let t=e.getBoundingClientRect();l.push(ee(t))}),r(l),e!==a?t(ee(i.getBoundingClientRect())):t(null),N(n),m({type:d,msg:"HIT",id:e,tag:n,rect:e!==a?ee(i.getBoundingClientRect()):null})}}function n(){j.current&&!P.current&&(t(null),r([]),N(null),eo(),M.current=null,O.current=null,m({type:d,msg:"HIT",id:null,tag:null,rect:null}))}function o(e){var t;if(P.current||!j.current)return;let n=null==(t=e.target)?void 0:t.closest("[data-orchids-id]");if(n&&p(n)&&(V.current="true"===n.contentEditable,!V.current)){let e=n.getAttribute("style")||"";n.setAttribute("style","".concat(e,"; outline: none !important; box-shadow: none !important;")),n.contentEditable="true",n.childElementCount>0&&n.querySelectorAll("*").forEach(e=>{e.contentEditable="false",e.setAttribute("data-orchids-protected","true"),e.style.userSelect="none",e.style.webkitUserSelect="none"})}}function s(e){if(P.current||!j.current)return;let n=Date.now();if(n-$.current<100)return;$.current=n;let o=e.target.closest("[data-orchids-id]");if(o){let n=o.getAttribute("data-orchids-name")||o.tagName.toLowerCase(),a=o.getAttribute("data-orchids-id"),s=p(o),c="a"===o.tagName.toLowerCase()||!!o.closest("a"),u="button"===o.tagName.toLowerCase()||"button"===o.getAttribute("role");(c||u||!s)&&(e.preventDefault(),e.stopPropagation());let f=D.current;D.current=o,l(a),k(n),a&&"undefined"!=typeof window&&localStorage.setItem(h,JSON.stringify({id:a,tag:n}));let w=document.querySelectorAll('[data-orchids-id="'.concat(a,'"]')),y=[];if(w.forEach(e=>{if(e===o)return;let t=e.getBoundingClientRect();y.push(ee(t))}),r(y),y.length>0&&N(n),"img"===o.tagName.toLowerCase()?q.current=o:q.current=null,Y.current=b(o),s&&(K.current&&(clearTimeout(K.current),K.current=null),U.current&&U.current!==o&&(U.current.blur(),ea()),o!==U.current)){U.current=o,o.childElementCount>0?F.current=g(o):F.current=o.innerText||o.textContent||"";let e={handleFocus:()=>{o===U.current&&(er(o),o.childElementCount>0?F.current=g(o):F.current=o.innerText||o.textContent||"",G.current=!1)},handleBlur:()=>{o===U.current&&(er(o),en(o))},handleInput:()=>{if(o!==U.current)return}};o.addEventListener("focus",e.handleFocus),o.addEventListener("blur",e.handleBlur),o.addEventListener("input",e.handleInput),o._editHandlers={focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput}}let E=ee(o.getBoundingClientRect());i(E),t(null);let S=o.getAttribute("class")||"",x="img"===o.tagName.toLowerCase()?o.src:void 0;x&&(H.current=v(x));let L=b(o);m({type:d,msg:"ELEMENT_CLICKED",id:a,tag:n,rect:E?{top:E.top,left:E.left,width:E.width,height:E.height}:{top:0,left:0,width:0,height:0},clickPosition:{x:e.clientX,y:e.clientY},isEditable:s,currentStyles:L,className:S,src:x}),setTimeout(()=>{eo(),f&&f!==o&&er(f),U.current&&U.current!==o&&ea()},0)}else D.current&&(eo(),er(D.current),ea(),D.current=null,l(null),k(null),i(null),t(null),r([]),N(null),"undefined"!=typeof window&&localStorage.removeItem(h),m({type:d,msg:"ELEMENT_CLICKED",id:null,tag:null,rect:{top:0,left:0,width:0,height:0},clickPosition:{x:e.clientX,y:e.clientY},isEditable:!1,currentStyles:{},className:""}))}function c(e){var n;if((null==(n=e.data)?void 0:n.type)===d){if("PREVIEW_FONT"===e.data.msg&&"elementId"in e.data){let{elementId:t,fontFamily:n}=e.data;if(J.current.has(t))return;let r=document.querySelector('[data-orchids-id="'.concat(t,'"]'));if(!r)return;let o=n.replace(/\s+/g,"+");if(!Z.current.has(o)){let e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=".concat(o,":wght@400&display=swap"),document.head.appendChild(e),Z.current.add(o)}r.style.fontFamily="'".concat(n,"', sans-serif");return}if("SCROLL"===e.data.msg&&"dx"in e.data&&"dy"in e.data&&window.scrollBy(e.data.dx,e.data.dy),"VISUAL_EDIT_MODE"===e.data.msg&&"active"in e.data){let n=e.data.active;E(n),n||"undefined"==typeof window||(localStorage.removeItem(u),localStorage.removeItem(h)),window.parent.postMessage({type:d,msg:"VISUAL_EDIT_MODE_ACK",active:n},"*"),n||(eo(),ea(),q.current=null,t(null),r([]),i(null),l(null),M.current=null,D.current=null,G.current=!1,N(null),k(null),m({type:d,msg:"HIT",id:null,tag:null,rect:null}))}if("CLEAR_INLINE_STYLES"===e.data.msg&&"elementId"in e.data&&(document.querySelectorAll('[data-orchids-id="'.concat(e.data.elementId,'"]')).forEach(e=>{["fontSize","color","fontWeight","fontStyle","textDecoration","textAlign","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","backgroundColor","backgroundImage"].forEach(t=>{e.style[t]=""})}),X.current.delete(e.data.elementId)),"SHOW_ELEMENT_HOVER"===e.data.msg&&"elementId"in e.data){let{elementId:t}=e.data;if(!t){r([]),N(null);return}let n=document.querySelectorAll('[data-orchids-id="'.concat(t,'"]'));if(n.length>0){let e=[],t="";n.forEach(n=>{if(n===D.current)return;let r=n.getBoundingClientRect();e.push(ee(r)),t||(t=n.getAttribute("data-orchids-name")||n.tagName.toLowerCase())}),r(e),N(e.length>0?t:null)}}}}function f(){!P.current&&j.current&&(I(!0),t(null),r([]),m({type:d,msg:"SCROLL_STARTED"}),B.current&&clearTimeout(B.current),B.current=window.setTimeout(()=>{I(!1),m({type:d,msg:"SCROLL_STOPPED"})},16))}return document.addEventListener("pointermove",e,{passive:!0}),document.addEventListener("pointerleave",n),document.addEventListener("mousedown",o,{capture:!0}),document.addEventListener("click",s,{capture:!0}),window.addEventListener("message",c),window.addEventListener("scroll",f,!0),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerleave",n),document.removeEventListener("mousedown",o,!0),document.removeEventListener("click",s,!0),window.removeEventListener("message",c),window.removeEventListener("scroll",f,!0),B.current&&clearTimeout(B.current)}},[a,S]),(0,c.jsxs)(c.Fragment,{children:[f&&!S&&(0,c.jsx)(c.Fragment,{children:n.filter(e=>null!==e).map((e,t)=>(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"orchids-hover-box",style:{zIndex:1e5,left:e.left,top:e.top,width:e.width,height:e.height}}),z&&(0,c.jsx)("div",{className:"orchids-hover-tag",style:{zIndex:100001,left:e.left,top:e.top-20},children:z})]},t))}),f&&o&&(0,c.jsxs)(c.Fragment,{children:[T&&(0,c.jsx)("div",{className:"orchids-focus-tag",style:{zIndex:100003,left:o.left-4,top:o.top-16},children:T}),(0,c.jsx)("div",{className:"orchids-focus-box",style:{zIndex:100001,left:o.left,top:o.top,width:o.width,height:o.height}}),!S&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-nw resize-handle",style:{zIndex:100002,left:o.left-4,top:o.top-4},onMouseDown:e=>ei(e,"nw")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-ne resize-handle",style:{zIndex:100002,left:o.left+o.width-4,top:o.top-4},onMouseDown:e=>ei(e,"ne")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-sw resize-handle",style:{zIndex:100002,left:o.left-4,top:o.top+o.height-4},onMouseDown:e=>ei(e,"sw")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-se resize-handle",style:{zIndex:100002,left:o.left+o.width-4,top:o.top+o.height-4},onMouseDown:e=>ei(e,"se")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-n resize-handle",style:{zIndex:100002,left:o.left+o.width/2-4,top:o.top-4},onMouseDown:e=>ei(e,"n")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-s resize-handle",style:{zIndex:100002,left:o.left+o.width/2-4,top:o.top+o.height-4},onMouseDown:e=>ei(e,"s")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-w resize-handle",style:{zIndex:100002,left:o.left-4,top:o.top+o.height/2-4},onMouseDown:e=>ei(e,"w")}),(0,c.jsx)("div",{className:"orchids-resize-handle orchids-resize-handle-e resize-handle",style:{zIndex:100002,left:o.left+o.width-4,top:o.top+o.height/2-4},onMouseDown:e=>ei(e,"e")})]})]})]})}}}]);